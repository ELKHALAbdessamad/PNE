{% extends 'base.html' %}

{% block content %}
  <h2>Liste des notes</h2>
  
  {% if notes %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Étudiant</th>
        <th>Matière</th>
        <th>Note</th>
        <th>Mentions</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for note in notes %}
        <tr>
          <td>{{ note.etudiant.username }}</td>
          <td>{{ note.matiere }}</td>
          <td>{{ note.note }}</td>
          <td>
            {% if note.note >= 16 %}
              Très bien
            {% elif note.note >= 14 %}
              Bien
            {% elif note.note >= 12 %}
              Assez bien
            {% elif note.note >= 10 %}
              Passable
            {% else %}
              Insuffisant
            {% endif %}
          </td>
          <td>
            <a href="{% url 'update_note' note.id %}" class="btn btn-sm btn-primary">Modifier</a>
            <a href="{% url 'delete_note' note.id %}" class="btn btn-sm btn-danger">Supprimer</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">
    Aucune note n'est disponible pour le moment.
  </div>
  {% endif %}
  
  {% if user.role == 'Prof' %}
  <div class="mt-3 d-flex justify-content-between">
    <a href="{% url 'add_note' %}" class="btn btn-success">
      <i class="fas fa-plus-circle me-2"></i>Ajouter une note
    </a>
    <a href="{% url 'dashboard_professeur' %}" class="btn btn-primary">
      <i class="fas fa-arrow-left me-2"></i>Retour au tableau de bord
    </a>
  </div>
  {% endif %}
{% endblock %}
